<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>MouseActionInputDataImp.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">UIESG</a> &gt; <a href="index.source.html" class="el_package">edu.fgcu.stesting.uiesg.data.imp</a> &gt; <span class="el_source">MouseActionInputDataImp.java</span></div><h1>MouseActionInputDataImp.java</h1><pre class="source lang-java linenums">package edu.fgcu.stesting.uiesg.data.imp;

import static java.awt.event.MouseEvent.MOUSE_FIRST;
import static java.awt.event.MouseEvent.MOUSE_LAST;

import java.awt.geom.Point2D;
import java.awt.geom.Rectangle2D;
import java.util.ArrayList;
import java.util.Iterator;
import java.util.List;
import java.util.NoSuchElementException;

import edu.fgcu.stesting.uiesg.data.MouseActionInputData;

/**
 * MouseActionInputData (MAID) is a container for the raw mouse data. Instances
 * will store the locations, timestamps and types of all MouseEvents generated
 * by the browser window.
 * 
 * @author oalpha
 *
 */
public class MouseActionInputDataImp implements MouseActionInputData {

	/**
	 * The rawData recorded by the browser.
	 */
	public List&lt;Point&gt; rawData;

	/**
	 * Constructs a MAID instance with an existing collection. This is for
	 * testing purposes.
	 * 
	 * @param rawData
	 *            the collection to be used in place of the default.
	 */
<span class="nc" id="L37">	protected MouseActionInputDataImp( List&lt;Point&gt; rawData ) {</span>
<span class="nc" id="L38">		this.rawData = rawData;</span>
<span class="nc" id="L39">	}</span>

	/**
	 * Constructs a standard MAID instance.
	 */
<span class="fc" id="L44">	public MouseActionInputDataImp() {</span>
<span class="fc" id="L45">		rawData = new ArrayList&lt;Point&gt;();</span>
<span class="fc" id="L46">	}</span>

	/**
	 * Returns the number of points recorder.
	 * 
	 * @return the number of points
	 */
	public int size() {
<span class="nc" id="L54">		return rawData.size();</span>
	}

	/**
	 * Returns the box bounding the points in rawData.
	 * 
	 * @param page
	 *            true if the box should bound position instead of location.
	 * 
	 * @return the bounding box
	 */
	public Rectangle2D getRange( boolean page ) {

		// iterate through the arraylist to find the minimums and maximums to
		// create the box
<span class="nc" id="L69">		Point temp = rawData.get(0);</span>
<span class="nc bnc" id="L70" title="All 2 branches missed.">		double minX = (page ? temp.browserLocation : temp.pagePosition).getX();</span>
<span class="nc bnc" id="L71" title="All 2 branches missed.">		double minY = (page ? temp.browserLocation : temp.pagePosition).getY();</span>
<span class="nc bnc" id="L72" title="All 2 branches missed.">		double maxX = (page ? temp.browserLocation : temp.pagePosition).getX();</span>
<span class="nc bnc" id="L73" title="All 2 branches missed.">		double maxY = (page ? temp.browserLocation : temp.pagePosition).getY();</span>
<span class="nc bnc" id="L74" title="All 2 branches missed.">		for (int i = 1; i &lt; rawData.size(); i++) {</span>
<span class="nc" id="L75">			Point tmp = rawData.get(i);</span>
<span class="nc bnc" id="L76" title="All 4 branches missed.">			if ((page ? tmp.browserLocation : tmp.pagePosition).getX() &lt; minX) // find</span>
																				// smallest
<span class="nc bnc" id="L78" title="All 2 branches missed.">				minX = (page ? tmp.browserLocation : tmp.pagePosition).getX();</span>
<span class="nc bnc" id="L79" title="All 4 branches missed.">			if ((maxX &lt; (page ? tmp.browserLocation : tmp.pagePosition).getX())) // find</span>
																					// largest
<span class="nc bnc" id="L81" title="All 2 branches missed.">				maxX = (page ? tmp.browserLocation : tmp.pagePosition).getX();</span>
<span class="nc bnc" id="L82" title="All 4 branches missed.">			if ((page ? tmp.browserLocation : tmp.pagePosition).getY() &lt; minY)</span>
<span class="nc bnc" id="L83" title="All 2 branches missed.">				minY = (page ? tmp.browserLocation : tmp.pagePosition).getY();</span>
<span class="nc bnc" id="L84" title="All 4 branches missed.">			if ((maxY &lt; (page ? tmp.browserLocation : tmp.pagePosition).getY()))</span>
<span class="nc bnc" id="L85" title="All 2 branches missed.">				maxY = (page ? tmp.browserLocation : tmp.pagePosition).getY();</span>
		}

<span class="nc" id="L88">		return new Rectangle2D.Double(minX, minY, maxX - minX, maxY - minY);</span>

	}

	/**
	 * Returns the timestamp of the latest point added if any exist.
	 * 
	 * @return the latest timestamp
	 * @throws NoSuchElementException
	 *             if no points have been added.
	 */
	public long latestTimestamp() throws NoSuchElementException {

<span class="nc bnc" id="L101" title="All 2 branches missed.">		if (rawData == null)</span>
<span class="nc" id="L102">			throw new NoSuchElementException(&quot;No element&quot;);</span>
		else {
<span class="nc" id="L104">			Point item = rawData.get(rawData.size() - 1);</span>
<span class="nc" id="L105">			return item.timestamp;</span>
		}

	}

	/**
	 * Records a mouse event.
	 * 
	 * @param browserPoint
	 *            the point on the browser
	 * @param pagePoint
	 *            the point on the page
	 * @param timestamp
	 *            the time of the event
	 * @param type
	 *            the type of event
	 * @throws IllegalArgumentException
	 *             if either pagePoint or browserPoint contains negative values,
	 *             if timestamp is younger than the current latest timestamp or
	 *             if type is not one of the allowed types specified in
	 *             MouseEvent.
	 */
	public void addPoint( Point2D browserPoint, Point2D pagePoint,
			long timestamp, int type ) throws IllegalArgumentException {
		// throw new RuntimeException(&quot;method not implemented&quot;);
<span class="nc bnc" id="L130" title="All 4 branches missed.">		if (browserPoint.getX() &lt; 0 || browserPoint.getY() &lt; 0)</span>
<span class="nc" id="L131">			throw new IllegalArgumentException();</span>
<span class="nc bnc" id="L132" title="All 4 branches missed.">		if (pagePoint.getX() &lt; 0 || pagePoint.getY() &lt; 0)</span>
<span class="nc" id="L133">			throw new IllegalArgumentException();</span>
<span class="nc bnc" id="L134" title="All 2 branches missed.">		if (timestamp &lt; latestTimestamp())</span>
<span class="nc" id="L135">			throw new IllegalArgumentException();</span>
<span class="nc bnc" id="L136" title="All 4 branches missed.">		if (type &lt; MOUSE_FIRST || type &gt; MOUSE_LAST)</span>
<span class="nc" id="L137">			throw new IllegalArgumentException();</span>

<span class="nc" id="L139">		Point p = new Point();</span>
<span class="nc" id="L140">		p.browserLocation = browserPoint;</span>
<span class="nc" id="L141">		p.pagePosition = pagePoint;</span>
<span class="nc" id="L142">		p.timestamp = timestamp;</span>
<span class="nc" id="L143">		p.type = type;</span>

<span class="nc" id="L145">		rawData.add(p);</span>

<span class="nc" id="L147">	}</span>

	/**
	 * Iterates through rawData. Used by GODFactories to compile into graph
	 * data.
	 * 
	 * @return the iterator
	 */
	public Iterator&lt;Point&gt; iterate() {
<span class="nc" id="L156">		throw new RuntimeException(&quot;method not implemented&quot;);</span>
	}

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.4.201502262128</span></div></body></html>